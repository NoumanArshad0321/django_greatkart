{% extends "base.html" %}
{% load static %}

{% block content %}
<section class="section-content padding-y d-flex justify-content-center align-items-center" 
         style="min-height: 100vh; background: linear-gradient(135deg, #1f1c2c, #928dab);">

  <div class="card shadow-lg border-0" 
       style="max-width:520px; width:100%; border-radius: 20px; backdrop-filter: blur(12px); background: rgba(255,255,255,0.95);">
    
    <article class="card-body p-5">

      <!-- Avatar / Logo -->
      <div class="text-center mb-4">
        <img src="{% static 'images/avatar.png' %}" 
             alt="avatar" 
             class="rounded-circle shadow"
             style="width:90px; height:90px; border:4px solid #0d6efd; background:#fff;">
      </div>

      {% include "includes/alerts.html" %}

      <!-- Title -->
      <header class="mb-4 text-center">
        <h2 class="fw-bold text-primary">Create Account</h2>
        <p class="text-muted">Register to unlock all features</p>
      </header>

      <!-- Registration Form -->
      <form action="{% url 'register' %}" method="POST" id="registerForm" novalidate>
        {% csrf_token %}

        <div class="row">
          <div class="col-md-6 mb-3">
            <label class="form-label fw-semibold">First Name</label>
            {{ form.first_name }}
          </div>
          <div class="col-md-6 mb-3">
            <label class="form-label fw-semibold">Last Name</label>
            {{ form.last_name }}
          </div>
        </div>

        <div class="row">
          <div class="col-md-6 mb-3">
            <label class="form-label fw-semibold">Email</label>
            {{ form.email }}
          </div>
          <div class="col-md-6 mb-3">
            <label class="form-label fw-semibold">Phone Number</label>
            {{ form.phone_number }}
          </div>
        </div>

        <div class="row">
          <div class="col-md-6 mb-3">
            <label class="form-label fw-semibold">Password</label>
            <div class="input-group">
              {{ form.password }}
              <button type="button" class="btn btn-outline-secondary toggle-password">
                <i class="bi bi-eye"></i>
              </button>
            </div>
          </div>
          <div class="col-md-6 mb-3">
            <label class="form-label fw-semibold">Confirm Password</label>
            <div class="input-group">
              {{ form.confirm_password }}
              <button type="button" class="btn btn-outline-secondary toggle-password">
                <i class="bi bi-eye"></i>
              </button>
            </div>
          </div>
        </div>

        <!-- Submit Button -->
        <div class="d-grid mt-4">
          <button type="submit" class="btn btn-primary btn-lg" style="border-radius: 12px;">
            <i class="bi bi-person-plus me-2"></i> Register
          </button>
        </div>

        <!-- Errors -->
        <div class="mt-3 text-danger">
          {{ form.email.errors }}
          {{ form.non_field_errors }}
        </div>
      </form>

      <!-- Footer -->
      <p class="text-center text-muted mt-4">
        Already have an account? 
        <a href="{% url 'login' %}" class="fw-bold text-decoration-none">Login here</a>
      </p>

    </article>
  </div>

</section>

<!-- Password Toggle -->
<script>
  document.querySelectorAll('.toggle-password').forEach(btn => {
    btn.addEventListener('click', function() {
      let input = this.parentElement.querySelector('input');
      let icon = this.querySelector('i');
      if (input.type === "password") {
        input.type = "text";
        icon.classList.replace("bi-eye", "bi-eye-slash");
      } else {
        input.type = "password";
        icon.classList.replace("bi-eye-slash", "bi-eye");
      }
    });
  });
</script>
{% endblock %}
